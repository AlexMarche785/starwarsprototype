<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Space Fighter Sim - Varied TIEs</title> {/* Updated Title */}
    <style>
        body { margin: 0; overflow: hidden; background-color: #000000; }
        canvas { display: block; }
        #info {
            position: absolute;
            top: 50px; /* Lowered further */
            left: 10px;
            color: white; font-family: sans-serif; background: rgba(0,0,0,0.5);
            padding: 5px; border-radius: 3px; font-size: 12px; z-index: 1;
        }
        /* HP Gauge Styling */
        #hp-gauge-container {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 150px; /* Width of the bar container */
            height: 20px; /* Height of the bar */
            background-color: rgba(50, 50, 50, 0.7); /* Dark background */
            border: 1px solid #777;
            border-radius: 4px;
            overflow: hidden; /* Keep inner bar contained */
            z-index: 1;
            display: flex; /* Align text */
            align-items: center;
        }
        #hp-gauge-bar {
            width: 100%; /* Start full */
            height: 100%;
            background-color: #00ff00; /* Start green */
            transition: width 0.2s ease-out, background-color 0.2s ease-out; /* Smooth transitions */
        }
         #hp-gauge-text {
            position: absolute; /* Overlay text on the bar */
            left: 5px;
            right: 5px;
            top: 1px; /* Fine-tune vertical alignment */
            color: black;
            font-family: monospace;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(255,255,255,0.5); /* Make text more readable */
            pointer-events: none; /* Allow clicks through text */
        }

        #game-over-display {
             position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
             color: yellow; font-family: sans-serif; font-size: 32px; font-weight: bold;
             text-align: center; background: rgba(0,0,0,0.7); padding: 20px; border-radius: 10px;
             display: none; z-index: 20;
        }

        /* --- UI Controls --- */
        .touch-control { position: absolute; bottom: 20px; opacity: 0.6; user-select: none; -webkit-user-select: none; touch-action: none; z-index: 10; }
        #joystick-base { left: 20px; width: 120px; height: 120px; background-color: #444; border-radius: 50%; border: 2px solid #222; }
        #joystick-handle { position: absolute; width: 60px; height: 60px; background-color: #888; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; }
        #fire-button { right: 20px; width: 80px; height: 80px; background-color: #c00; border-radius: 50%; border: 2px solid #800; display: flex; justify-content: center; align-items: center; color: white; font-weight: bold; font-size: 16px; }
        #fire-button:active { background-color: #800; }
        #warp-button { right: 115px; width: 70px; height: 70px; background-color: #0077cc; border-radius: 50%; border: 2px solid #004488; display: flex; justify-content: center; align-items: center; color: white
